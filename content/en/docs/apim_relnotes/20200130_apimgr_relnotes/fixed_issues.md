{
"title": "Fixed issues",
"linkTitle": "Fixed issues",
"weight": "20",
"date": "2019-09-20",
"description": "Listing of fixed issues in this release of API Gateway and API Manager."
}

This version of API Gateway and API Manager includes the fixes from all 7.5.3, 7.6.2, and 7.7 service packs or updates released prior to this version. For details of all the service pack fixes included, see corresponding _SP Readme_ attached to each service pack on [Axway Support](https://support.axway.com).

## Fixed security vulnerabilities

This release contains no fixed security vulnerabilities.

## Other fixed issues

|Internal ID | Case ID | Description |
|------------|---------|-------------|
| RDAPI-15632               | 1006999                                            | **Issue**:   API Manager does not support `allOf` element in Swagger 2.      **Resolution**: `allOf` is supported in models and as a response schema                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| RDAPI-15677               | 919461                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| RDAPI-16048               | 1084215                                            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| RDAPI-16545               | 1062392                                            | **Issue**:   In API Gateway, when HTTP redaction is enabled, API Gateway automatically   turns on XML redaction for XML messages. This can result in performance   issues, especially on larger XML messages.      **Resolution**: In API Gateway, enabling HTTP redaction will not perform XML   redaction on XML messages unless it is specifically configured.                                                                                                                                                                                                                     |
| RDAPI-17027               | 999364                                             | **Issue**:   ModSecurity status code was hardcoded to 403.      **Resolution**: It can now be configured in ModSecurity configuration.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| RDAPI-17033               | 1059408                                            | **Issue**:   An assertion is triggered when thread cannot be started.      **Resolution**: Threads will no longer terminate process when they could not be   started.                                                                                                                                                                                                                                                                                                                                                                                                                |
| RDAPI-17048               | 1059408                                            | **Issue**:   Process termination is triggered when network connection cannot be   instantiated.      **Resolution**: Connection instantiation errors are no longer triggering   process termination.                                                                                                                                                                                                                                                                                                                                                                                 |
| RDAPI-17097               | 01064543,   01078637                               | **Issue**:   No option to prevent API Manager adding a forward slash `/` to   back-end API calls.      **Resolution**: Add the   `com.vordel.apimanager.swagger.method.singleslash.ignore=true` Java   system property to the file `jvm.xml` in the directory `conf/` of the instance to   disable passing a single slash method path to the back-end.                                                                |
| RDAPI-17129               | 1064774                                            | **Issue**:   User data entered during registration in case of user are not validated are   expired but kept in database.      **Resolution**: User data entered during registration are now entered using   "time to live" parameter, which will cause the data to be deleted by   database.                                                                                                                                                                                                                                                                                            |
| RDAPI-17133               | 1040133                                            | **Issue**:   Parallel deletion of APIs caused issues in updates of quota relations in   tables.      **Resolution**: Parallel deletion of APIs is fixed by removing by using caching   of the quota relations, removing the need to do update and doing only delete   on database when removing information about quota.                                                                                                                                                                                                                                                               |
| RDAPI-17251               | 01084300,   01056692                               | **Issue**:   OAuth server does not return 401 in compliance with the RFC for certain   "invalid_client" errors.      **Resolution**: It now returns 401 as per RFC.                                                                                                                                                                                                                                                                                                                                                                                                                  |
| RDAPI-17277               | 1074983                                            | **Issue**:   In API Gateway, when using OpenID Connect 1.0 on top of the OAuth 2.0   protocol, OpenId tokens generated by the hybrid flow do not contain the   c_hash (code hash) value.      **Resolution**: OpenID tokens generated by the hybrid flow now include c_hash.                                                                                                                                                                                                                                                                                                         |
| RDAPI-17291               | 1075542                                            | **Issue**:   When a REST API is created in Policy Studio and then deployed to a API   Gateway, the base path appears duplicated in Dynamic Settings of API Gateway   Manager.      **Resolution**: In API Gateway Manager, Dynamic Settings now lists REST APIs   created in Policy Studio only once.                                                                                                                                                                                                                                                                                |
| RDAPI-17305               | 1076160                                            | **Issue**:   Malformed JSON content may bypass API request payload validation in some   cases.           **Resolution**: API request payload validation strictly verifies all tokens in   JSON payload for Objects and Arrays. To enable relaxed JSON parsing, set the   Java system property `com.axway.json.parser.legacy` to `true`. The default is   `false`.                                                                                                                                                                                                                          |
| RDAPI-17331               | 1080317                                            | **Issue**:   JSON to XML filter was crashing in some specific cases for valid input.      **Resolution**: JSON to XML filter is fixed now and should work properly for   valid inputs.                                                                                                                                                                                                                                                                                                                                                                                                 |
| RDAPI-17366               | 1079458                                            | **Issue**:   Generated swagger of Frontend API does not contain Pass Through security   device when part of Security Profile that contains other security devices as   well.      **Resolution**: Generated swagger of Frontend API now contains Pass Through as   empty object { } when part of Security Profile with multiple security devices.                                                                                                                                                                                                                                      |
| RDAPI-17375               | 01054344,   01070938                               | **Issue**:   Custom attributes added during invocation of a policy during the OAuth   External inbound security authentication were discarded upon failed   authentication, and thus were not available to the Fault Handler.           **Resolution**: Upon failed OAuth External authentication all custom attributes   created during policy invocation are retained, and are available to be used   in the Fault Handler.                                                                                                                                                        |
| RDAPI-17386               | 1059408                                            | **Issue**:   In API Gateway, in some specific cases, the caching of SSL connections was   producing memory leaks that could cause the gateway to crash.           **Resolution**: In API Gateway, memory handling has been reviewed and is now   fixed for SSL connections caching.                                                                                                                                                                                                                                                                                                  |
| RDAPI-17406               | 1088304                                            | **Issue**:   After deploying to a Gateway a new Api Client Cache is created, but all   references to the old cache are not removed so the memory it consumes is not   made available again.      **Resolution**: All references to the discarded Api Client Cache are removed,   so the memory it was consuming is made available again right after deployment   completes.                                                                                                                                                                                                          |
| RDAPI-17476               | 1091120                                            | **Issue**:   Requests return status code 401 while the API Client Cache is still updating.        **Resolution**: Requests will now return status code 503 unless system variable `com.axway.apimanager.apiclient.cache.response.legacy` is set to   `true`.                                                                                                                                                                                                                                                                                                                    |
| RDAPI-17483               | 1083828                                            | **Issue**:   Transaction access logger is doing a reverse DNS lookup with the source IP   address even when "%h" is not used.      **Resolution**: A DNS lookup has been removed from policy pre-execution phase.                                                                                                                                                                                                                                                                                                                                                                    |
| RDAPI-17540               | 1075694                                            | **Issue**:   The IP address authentication filter updates are very slow.      **Resolution**: The performance of IP address authentication filter is improved   as the amount of disk I/O performed is significantly reduced.                                                                                                                                                                                                                                                                                                                                                        |
| RDAPI-17703               | 01120559,   01095837                               | **Issue**:   Swagger was not properly serialized in some cases after switch to new swagger   library.      **Resolution**: Swagger serialization was fixed by using associated   serialization functionality.                                                                                                                                                                                                                                                                                                                                                                        |
| RDAPI-17705               | 1069445                                            | **Issue**:   Deployment REST API envsettings/service/{serviceId} returns 500 Internal   server error when instance is remote.      **Resolution**: It now returns the environment settings of the remote instance   as requested.                                                                                                                                                                                                                                                                                                                                                    |
| RDAPI-17782               | 01068308,   01100492                               | **Issue**:   Backend invocation failing with 500 when outbound OAuth is used and Trace   level is set to DATA.      **Resolution**: Backend invocation when outbound OAuth is used works with all   trace levels.                                                                                                                                                                                                                                                                                                                                                                    |
| RDAPI-17784               | 1097471                                            | **Issue**:   Trace: Error traces not provided when an error is triggered when an OAuth   scope is added as form parameter.      **Resolution**: Error traces are now shown in logs.                                                                                                                                                                                                                                                                                                                                                                                                   |
| RDAPI-17793               | 1077309                                            | **Issue**: When attempting to generate a Swagger 2.0 file from API Manager's API Catalog   for a virtualized Swagger 2.0 API, the following fields were dropped: Response header description removed; Schema $ref lost for 'array' responses. **Resolution**: Response header description and schema $ref for 'array' responses are   now present in the resultant Swagger 2.0 download.                                                                                                                                                                         |
| RDAPI-17904               | 1090822                                            | **Issue**:   API Gateway doesn't check OA Authz codes' expiry times when stored in an SQL   DB. Purge thread is responsible to delete expired codes. This caused a   potential delay, as API Gateway treated all available codes as valid.      **Resolution**: API Gateway now checks OAuth Authz codes expiry time when uses   it. Purge thread behaves as before.                                                                                                                                                                                                                 |
| RDAPI-17969               | 1096739                                            | **Issue**:   XML Signature Verify filter causes orphaned/leaked files in temporary   directory.           **Resolution**: The XML Signature Generate and XML Signature Verify filters are   updated for thread-safety, and they correctly cleanup resources allocated for   attachments of the processed message payload.                                                                                                                                                                                                                                                            |
| RDAPI-17979               | 1099089                                            | **Issue**:   API Gateway was sending redundant data during cache synchronization process.        **Resolution**: Data sent during cache synchronization is reduced.                                                                                                                                                                                                                                                                                                                                                                                                                  |
| RDAPI-17987               | 1091984                                            | **Issue**:   In Policy Studio Rest API Repository editing a method      does not work if an error response is configured for the method.      **Resolution**: An API Rest method with an error response configured can now be   edited.                                                                                                                                                                                                                                                                                                                                              |
| RDAPI-18035               | 01080681,   01084375                               | **Issue**:   The deployment time for API Manager is too slow when there are many APIs and   methods defined in KPS.      **Resolution**: Improved caching in API Manager while loading API method data   stored in KPS. Reuse compiler when loading the Script filters.                                                                                                                                                                                                                                                                                                              |
| RDAPI-18038               | 01094555,   01094399                               | **Issue**:   API Manager startup time slows down considerably in HA environments when the   number of organizations increase.      **Resolution**: Organizations are cached in memory so the calls to DB are   reduced. This makes the startup process faster.                                                                                                                                                                                                                                                                                                                       |
| RDAPI-18104               | 1074742                                            | **Issue**:   A missed impact in the advanced editing implementation leads to a blank   entity reference overwriting the first in the list of node locations for the   XML Signature Generation & Verification filters.      **Resolution**: Valid node location references are not overwritten during save   in advanced editing mode.                                                                                                                                                                                                                                                 |
| RDAPI-18107               | 1088304                                            | **Issue**:   The browser is unable to process the number of External Clients, OAuth   Clients and API Keys that API Gateway is returning - upwards of a 100mb   payload in the response payload.      **Resolution**: Server side pagination is implemented for GET requests for   Apikeys, OAuth Clients and External Clients resulting in much smaller   payloads being returned to the client.                                                                                                                                                                                    |
| RDAPI-18111               | 01048992,   01049266                               | **Issue**:   As a User a getApplications call results in an individual call to KPS for   every application to look up permissions.      **Resolution**: The permissions are already cached, we are now using the cached   permissions rather than reading from KPS for each application.                                                                                                                                                                                                                                                                                              |
| RDAPI-18114               | 01073806,   01074080                               | **Issue**:   Event logging for API Manager was incorrectly overwriting the Application Id   in the Service Context "client" field.      **Resolution**: API Manager no longer overwrites the Service Context   "client" field from its initial value.                                                                                                                                                                                                                                                                                                                                |
| RDAPI-18118               | 1079030                                            | **Issue**:   The `apimanager-promote` script only had capabilities to add API access to an   organization. There was no functionality to revoke access.      **Resolution**: 'organization.apis.remove' new property was added to the script   to allow to revoke API access from organizations.                                                                                                                                                                                                                                                                                       |
| RDAPI-18122               | 01094845,   01065335, 01066017, 01087748, 01100629 | **Issue**:   Error on formatting in Traffic Monitor GUI and Trace Files      **Resolution**: The alignment of trace output has been corrected. The trace   indentation error is now reported per processing thread, and if reported, the   trace indentation stays intact in unaffected threads.                                                                                                                                                                                                                                                                                     |
| RDAPI-18182               | 1108987                                            | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| RDAPI-18183               | 1100088                                            | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| RDAPI-18215               | 1109912                                            | **Issue**:   Documentation on API management filters was unclear.      **Resolution**: Additional information has been added to the documentation to   make it clearer how to use these filters.                                                                                                                                                                                                                                                                                                                                                                                     |
| RDAPI-18219               | 970806                                             | na                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| RDAPI-18233               | 1094845                                            | **Issue**:   Some trace messages were not being formatted correctly in the Node Manager   trace viewer.      **Resolution**: The trace messages are now formatted correctly.                                                                                                                                                                                                                                                                                                                                                                                                           |
| RDAPI-18236               | 01098414,   01108764                               | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| RDAPI-18247               | 1104282                                            | **Issue**:   In API Gateway, when a JSON message containing an empty message goes through   redaction, an error occurs and API Gateway fails to log the correct data in   the Traffic Monitor.      **Resolution**: In API Gateway, JSON Redaction accepts empty objects in   messages and logs the result to the Traffic Monitor.                                                                                                                                                                                                                                                   |
| RDAPI-18261               | 01026796,   01046656                               | **Issue**:   SFTP client filter shows intermittent handshake failure when uploading files   to an API Gateway SFTP Server.           **Resolution**: Intermittent handshake failures are fixed after SFTP   implementation is upgraded from using mina-sshd v0.6.0 to v2.2.0.           Note:      The `log4j.properties` was changed in order to add logging for the SFTP   Server.      When applying a patch/upgrade, you must merge your changes back to   the updated `log4j.properties` file.                                                                                |
| RDAPI-18267               | 1095443                                            | **Issue**:   Error found whilst attempting to perform a `sysupgrade export`.      **Resolution**: The LDAP query to retrieve users was incorrect and has been   updated to retrieve users successfully.                                                                                                                                                                                                                                                                                                                                                                                |
| RDAPI-18305               | 01085199,   01082725                               | **Issue**:   API Manager blocks API Manager traffic when processing virtualized API   updates.      **Resolution**: API Manager no longer blocks API Manager traffic.                                                                                                                                                                                                                                                                                                                                                                                                                |
| RDAPI-18311               | 1093544                                            | **Issue**:   RegEx pattern for email validation was incorrect.      **Resolution**: RegEx pattern for email validation changed to comply with   rfc5322.                                                                                                                                                                                                                                                                                                                                                                                                                             |
| RDAPI-18321               | 01101884,   01100259                               | **Issue**:   The SMTP connection security setting (SSL or TLS) that API Manager uses for   sending emails is not applied to the API Manager SMTP SSL port.      **Resolution**: The SMTP connection security setting is now applied to the API   Manager SSL SMTP port.                                                                                                                                                                                                                                                                                                              |
| RDAPI-18330               | 1085199                                            | **Issue**:   Resource Repository entry for previously imported API could not be found   causing API import from URL to fail for a repeated URL and API combination.        **Resolution**: Once the entry's existence is confirmed in memory a reference   to it is used to import the API definition.                                                                                                                                                                                                                                                                               |
| RDAPI-18370               | 01103876,   01058292                               | **Issue**:   When redaction is enabled, floating-point numbers in JSON body display in   exponential format.      **Resolution**: The format of the floating-point numbers in JSON body is   preserved.                                                                                                                                                                                                                                                                                                                                                                              |
| RDAPI-18395               | 1066497                                            | **Issue**:   Conflicts can occur during merging of API projects due to incorrect   comparison of entity fields of type Boolean.      **Resolution**: Entity fields of type Boolean are now correctly compared.                                                                                                                                                                                                                                                                                                                                                                       |
| RDAPI-18415               | 01098414,   01108764                               | **Issue**:   KPS cache caches empty search results, with no option to not cache such   results.      **Resolution**: The Java system property   `com.axway.kps.cache.ignorenull` can be used to not cache empty   results. This property is a boolean value with a default value of `false`.                                                                                                                                                                                                                                                                                           |
| RDAPI-18427               | 1085118                                            | **Issue**:   An organization's read-only createdOn field can be reset using a PUT request.        **Resolution**: An organization's createdOn field can no longer be changed   using a PUT request.                                                                                                                                                                                                                                                                                                                                                                                  |
| RDAPI-18436               | 1114461                                            | doc   updated                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| RDAPI-18495               | 1118106                                            | **Issue**:   RegEx validation for Backend API Method Parameter Name incorrectly disallows   hyphen `-` in the name.      **Resolution**: RegEx Validation now allows the use of a hyphen in an API   Parameter Name.                                                                                                                                                                                                                                                                                                                                                                   |
| RDAPI-18533               | 01095012,   01094618                               | **Issue**:   : "Retrieve OAuth Client Access Token From Token Storage" requires   a hard-coded Client-Credential profile.      **Resolution**: : "Retrieve OAuth Client Access Token From Token   Storage" can now read the Client-Credential profile from the whiteboard   in the same way as "Get OAuth Access Token" filter.                                                                                                                                                                                                                                                      |
| RDAPI-18597               | 1107890                                            | **Issue**:   One disabled OAuth credential makes the rest of OAuth credentials not usable.        **Resolution**: Disabling/Enabling one OAuth credential will not affect the   rest of OAuth credentials.                                                                                                                                                                                                                                                                                                                                                                           |
| RDAPI-18647               | 01103775,   01073101                               | **Issue**:   XML redaction is very slow when processing large XML files.      **Resolution**: XML redaction has been fully re-written to be performant and   have a low memory foot print: the maximum memory size and the maximum XML   nodes' depth accepted can be controlled using properties <XMLRedactor   maxBufferSize="32768" maxDepth="1024">.      **Issue**: XML redaction with disposition "redactDescendants" is only   removing children nodes.      **Resolution**: XML redaction with disposition "redactDescendants"   now correctly removes both text and children nodes. |
| RDAPI-18669               | 1088090                                            | **Issue**:   Get OAuth Client Access Token doesn't handle array data on the JSON returned   by the OAuth server      **Resolution**: OAuth Client Access Token JSON can now contain arrays as   additional information.                                                                                                                                                                                                                                                                                                                                                              |
| RDAPI-18797               | 01119493,   01123904, 01122491, 01119522           | **Issue**:   API Gateway 7.7 does not allow underscores in API Manager back-end URLs as   per RFC952. If you upgrade from an earlier version of API Gateway (which   allowed underscores) and you are using underscores in the host name component   of your back-end URLs, calls to these APIs will fail.      **Resolution**: A new JVM property   'com.axway.apimanager.backend.url.validation.hostname.allowunderscore' can be   set to 'true' in the jvm.xml configuration to allow underscores in the host   name part of an API Manager back-end URL.                         |
| RDAPI-18851               | 1127663                                            | **Issue**:   Some APIs are not working after upgrade from 7.5.3 to 7.7 and logs show   error: Unrecognized field "blob"      **Resolution**: Field "blob" was added to 7.7 to match the 7.5.3   method definition.                                                                                                                                                                                                                                                                                                                                                                   |
| RDAPI-18883               | 1019805                                            | **Issue**:   API Gateway cannot configure group passphrase with $ character in the   password.      **Resolution**: API Gateway allows to configure group passphrase containing $   character.                                                                                                                                                                                                                                                                                                                                                                                       |
|                           |                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |